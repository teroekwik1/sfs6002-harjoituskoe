<!DOCTYPE html>
<html lang="fi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SFS-6002 Harjoituskoe</title>

<style>
body {
font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto;
background:#f4f6f9;
margin:0;
padding:20px;
text-align:center;
}

.container{
max-width:650px;
margin:auto;
background:white;
padding:20px;
border-radius:12px;
box-shadow:0 0 10px rgba(0,0,0,0.1);
}

button{
width:100%;
padding:15px;
margin:8px 0;
font-size:16px;
border:none;
border-radius:10px;
background:#007bff;
color:white;
cursor:pointer;
}

button:hover{background:#0056b3;}

.progress-bar{
height:20px;
background:#ddd;
border-radius:10px;
overflow:hidden;
margin:10px 0;
}

.progress-fill{
height:100%;
width:0%;
background:#28a745;
transition:0.3s;
}

.pass{color:#28a745;font-weight:bold;}
.fail{color:#dc3545;font-weight:bold;}

.hidden{display:none;}
</style>
</head>

<body>

<div class="container">

<h2>SFS-6002 Harjoituskoe</h2>

<button onclick="startGame()">Aloita uusi harjoituskoe</button>

<div class="progress-bar">
<div id="progressFill" class="progress-fill"></div>
</div>

<p id="liveScore">Pisteet: 0 / 0 (0%)</p>

<h3 id="questionBox"></h3>

<div id="answers"></div>

<div id="summary" class="hidden">
<h3>Koetulos</h3>
<p id="finalScore"></p>
<h4>Virheanalyysi</h4>
<ul id="errorList"></ul>
<button onclick="window.print()">Tallenna PDF</button>
</div>

</div>

<script>
// === TÄHÄN TULEE SINUN 150 KYSYMYSTÄ ===
const fullQuestions = [
{q:"Mikä on sähköturvallisen työskentelyn tärkein lähtökohta?",a:["Työnopeus","Jännitteettömyys","Kokemus","Suojavaatetus"],c:1},
{q:"Viiden turvallisuussäännön ensimmäinen vaihe on:",a:["Maadoitus","Jännitteettömyyden toteaminen","Erottaminen","Suojaaminen"],c:2},
{q:"Jännitteettömyys todetaan:",a:["Silmämääräisesti","Mittalaitteella","Kuuntelemalla","Katkaisijan asennosta"],c:1},
{q:"Uudelleenkytkennän estäminen tehdään:",a:["Tarvittaessa","Aina erotuksen jälkeen","Vain suurjännitteessä","Ei koskaan"],c:1},
{q:"Työmaadoitus tehdään:",a:["Ennen mittausta","Mittauksen jälkeen","Koskaan ei tarvitse","Vain ulkona"],c:1},
{q:"Lähellä jännitteisiä osia työskenneltäessä vaaditaan:",a:["Suojaus","Nopeus","Valokuva","Raportointi"],c:0},
{q:"Työstä vastaava henkilö vastaa:",a:["Työn hinnasta","Työturvallisuudesta","Aikataulusta","Työkaluista"],c:1},
{q:"Ammattihenkilö määritellään:",a:["Ikä","Kokemus + koulutus","Palkka","Työvuodet"],c:1},
{q:"Opastettu henkilö saa työskennellä:",a:["Yksin","Valvonnassa","Vapaasti","Vain yöllä"],c:1},
{q:"Jännitetyö on sallittu kun:",a:["On kiire","Ei voida tehdä jännitteettömänä","Työnantaja käskee","On kylmä"],c:1},

{q:"Jännitekoetin tarkistetaan:",a:["Ennen käyttöä","Työn jälkeen","Ei koskaan","Kerran vuodessa"],c:0},
{q:"Riskinarviointi tehdään:",a:["Työn jälkeen","Ennen työtä","Vain suurjännitteessä","Ei koskaan"],c:1},
{q:"Sähkötyöturvallisuuskoulutus uusitaan:",a:["1v","3v","5v","10v"],c:2},
{q:"Turvaetäisyys estää:",a:["Putoamisen","Sähköiskun","Tulipalon","Melun"],c:1},
{q:"Suojaus voi olla:",a:["Mekaaninen","Akustinen","Valollinen","Kemiallinen"],c:0},
{q:"Työskentelyalue merkitään:",a:["Tarvittaessa","Aina","Ei koskaan","Vain suurjännitteessä"],c:1},
{q:"Käyttötoimenpide on:",a:["Työ","Kytkentä","Asennus","Korjaus"],c:1},
{q:"Sähkötyö on:",a:["Kytkentä","Asennus","Mittaus","Kaikki"],c:3},
{q:"Sähkötapaturman ensisijainen vaara:",a:["Melu","Paleltuma","Sähköisku","Liukastuminen"],c:2},
{q:"Valokaari aiheuttaa:",a:["Kylmyyttä","Lämpöä","Hiljaisuutta","Tärinää"],c:1},

{q:"Suojaimet valitaan:",a:["Hinnan mukaan","Riskin mukaan","Värin mukaan","Työntekijän mukaan"],c:1},
{q:"Henkilösuojaimia ovat:",a:["Hanskat","Kypärä","Suojalasit","Kaikki"],c:3},
{q:"Työ voidaan keskeyttää jos:",a:["On kiire","Turvallisuus vaarantuu","On tauko","Sataa"],c:1},
{q:"Työmaadoitus suojaa:",a:["Ylijännitteeltä","Takaisinkytkennältä","Melulta","Kosteudelta"],c:1},
{q:"SFS-6002 koskee:",a:["Kaikkia sähkötöitä","Vain suurjännitteitä","Vain kotitalouksia","Vain tehtaita"],c:0},
{q:"Turvallinen työ edellyttää:",a:["Suunnittelua","Riskinarviointia","Perehdytystä","Kaikki"],c:3},
{q:"Valvonta kuuluu:",a:["Työntekijälle","Työstä vastaavalle","Asiakkaalle","Tarkastajalle"],c:1},
{q:"Jännitetyössä käytetään:",a:["Paljaita käsiä","Eristettyjä välineitä","Ei mitään","Metallia"],c:1},
{q:"Lähialue tarkoittaa:",a:["Turva-aluetta","Kiellettyä aluetta","Valvottua aluetta","Vapaata aluetta"],c:2},
{q:"Vaara-alue on:",a:["Turvallinen","Jännitteinen","Valvottu","Merkityksetön"],c:1},

// --- jatkuu samaa tasoa ---

{q:"Riskienhallinta kuuluu:",a:["Johtajille","Kaikille","Vain tarkastajille","Ei kenellekään"],c:1},
{q:"Turvallinen työskentely perustuu:",a:["Sääntöihin","Sattumaan","Nopeuteen","Kokemukseen"],c:0},
{q:"Turvallisuus varmistetaan:",a:["Suunnittelulla","Koulutuksella","Valvonnalla","Kaikki"],c:3},
{q:"Sähkötöissä suurin riski on:",a:["Meluvamma","Sähköisku","Liukastuminen","Kylmyys"],c:1},
{q:"Työalueen merkintä estää:",a:["Virheet","Putoamisen","Asiattoman pääsyn","Melun"],c:2},
{q:"Jännitetyön lisävaara on:",a:["Pöly","Valokaari","Melu","Kylmyys"],c:1},
{q:"Turvallinen työ edellyttää:",a:["Yhteistyötä","Ohjeita","Perehdytystä","Kaikki"],c:3},
{q:"Turvallisuus syntyy:",a:["Säännöistä","Koulutuksesta","Valvonnasta","Kaikki"],c:3},
{q:"Sähkötyö vaatii:",a:["Osaamista","Onnea","Nopeutta","Hiljaisuutta"],c:0},
{q:"Sähkötyön riskit hallitaan:",a:["Suunnittelulla","Varovaisuudella","Kokemuksella","Kaikki"],c:3},

{q:"Turvallisuus on:",a:["Prosessi","Sattuma","Henkilökohtainen","Vaihtoehto"],c:0},
{q:"Sähkötyö ilman riskinarviointia on:",a:["Sallittu","Kielletty","Suositeltu","Mahdollinen"],c:1}

];

let gameQuestions = [];
let current=0;
let score=0;
let mistakes=[];

function shuffle(arr){
return arr.sort(()=>Math.random()-0.5);
}

function startGame(){
gameQuestions = shuffle([...fullQuestions]).slice(0,30);
current=0;
score=0;
mistakes=[];
document.getElementById("summary").classList.add("hidden");
nextQuestion();
updateProgress();
}

function nextQuestion(){
if(current>=30){
endGame();
return;
}

let q = gameQuestions[current];
document.getElementById("questionBox").innerText = q.q;

let answersHTML="";
q.a.forEach((ans,i)=>{
answersHTML+=`<button onclick="answer(${i})">${ans}</button>`;
});
document.getElementById("answers").innerHTML=answersHTML;
}

function answer(choice){
let q = gameQuestions[current];
if(choice===q.c){
score++;
}else{
mistakes.push({
question:q.q,
correct:q.a[q.c]
});
}
current++;
updateProgress();
nextQuestion();
}

function updateProgress(){
let percent = current ? Math.round((score/current)*100) : 0;
document.getElementById("liveScore").innerText =
`Pisteet: ${score} / ${current} (${percent}%)`;

document.getElementById("progressFill").style.width = percent+"%";
}

function endGame(){
let percent = Math.round((score/30)*100);
let pass = percent>=90;

document.getElementById("finalScore").innerHTML =
`Lopputulos: ${score}/30 (${percent}%) <br>
<span class="${pass?'pass':'fail'}">
${pass?'LÄPI':'HYLÄTTY'}
</span>`;

let errorHTML="";
mistakes.forEach(m=>{
errorHTML+=`<li>${m.question}<br>✔ Oikea: ${m.correct}</li>`;
});
document.getElementById("errorList").innerHTML=errorHTML;

document.getElementById("summary").classList.remove("hidden");
document.getElementById("answers").innerHTML="";
document.getElementById("questionBox").innerText="Simulaatio valmis";
}

</script>

</body>
</html>